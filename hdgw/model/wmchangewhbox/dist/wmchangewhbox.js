define(function(require,exports,module){var b=require("http://a.myhd.wumeiwang.com/hdgw/model/domains/dist/domains.js");var c=require("http://a.myhd.wumeiwang.com/hdgw/model/lib/jquery/seajs-jquery-1.8.3.min.js");var a=function(h){var d=this;var e=c.extend({changeEle:".wmchangewhbox",paeentBox:".changeboxparent",changeBtnDownCallback:function(){},changeBtnUpCallback:function(){},changeBtnMousemoveCallback:function(){},changePX:function(){}},h);var f=function(){d.$changeBox.css("position")=="static"&&d.$changeBox.css("position","relative");d.$changeBtn=c('<a href="#" class="changebtn" style="cursor:se-resize;display: block; position: absolute; width: 5px; height: 5px; border: 1px solid #999; bottom: -4px; right: -4px; background: #fff; "></a>');d.$changeBox.append(d.$changeBtn);g()};var g=function(){var i=c("body");d.$changeBtn.on("mousedown",function(){d.stop=false;typeof e.changeBtnDownCallback==="function"&&e.changeBtnDownCallback.call(d)});i.on("mouseup",function(){d.stop=true;typeof e.changeBtnUpCallback==="function"&&e.changeBtnUpCallback.call(d)});i.on("mousemove.changewhbox",function(r){var q,n,s,l,t,k,v,m,p,j,u,o;if(d.stop){return}q=r.pageX,n=r.pageY;t=d.$changeBox.offset();s=d.$changeBox.outerWidth();l=d.$changeBox.outerHeight();if(d.$paeentBox.length){j=d.$paeentBox.offset();p={top:t.top-j.top,left:t.left-j.left}}if(typeof e.changePX==="function"){m=e.changePX.call({pageY:n,pageX:q,offsetY:t.top,offsetX:t.left,parentTop:p.top,parentLeft:p.left,width:d.$changeBox.width(),height:d.$changeBox.height(),outerWidth:s,outerHeight:l,$changeBox:d.$changeBox,$paeentBox:d.$paeentBox,$changeBtn:d.$changeBtn,stop:d.stop})}k=(m&&m.Width)||(q-t.left-s+d.$changeBox.width());v=(m&&m.Height)||(n-t.top-l+d.$changeBox.height());if(d.$paeentBox.length){j=d.$paeentBox.offset();u=d.$paeentBox.outerWidth();o=d.$paeentBox.outerHeight();if(k+p.left>u){k=u-p.left-2}if(v+p.top>o){v=o-p.top-2}}d.$changeBox.width(k);d.$changeBox.height(v);typeof e.changeBtnMousemoveCallback==="function"&&e.changeBtnMousemoveCallback.call({$changeBox:d.$changeBox,width:d.$changeBox.width(),height:d.$changeBox.height()})})};this.$changeBox=c(e.changeEle);this.$paeentBox=this.$changeBox.closest(e.paeentBox);this.$changeBtn;this.stop=true;f()};exports.create=function(d){return new a(d)}});