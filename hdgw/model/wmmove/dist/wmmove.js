define(function(require,exports,module){var a=require("http://a.myhd.wumeiwang.com/hdgw/model/domains/dist/domains.js");var b=require("http://a.myhd.wumeiwang.com/hdgw/model/lib/jquery/seajs-jquery-1.8.3.min.js");var c=function(i){var d=this;var e=b.extend({moveEle:".wmmove",event:"mousedown",parentEle:".wmmoveparent",moveOffset:{top:0,left:0},mousemoveCallback:function(){}},i);var g=false;var f=function(){var j,k;d.$moveBox.css({position:"absolute"});j=d.$moveBox.outerWidth();k=d.$moveBox.outerHeight();h()};var h=function(){var j=b("body");if(e.event==="mousedown"){d.$moveBox.on("mousedown.wmmove",function(m){var l=b(this),k;d.isDown=true;k=l.offset();d.mouseParentX=m.pageX-k.left;d.mouseParentY=m.pageY-k.top});j.on("mouseup.wmmove",function(){d.isDown=false})}else{d.isDown=true;d.mouseParentX=d.$moveBox.outerWidth()/2;d.mouseParentY=d.$moveBox.outerHeight()/2}j.on("mousemove.wmmove",function(q){if(!d.isDown){return}if(d.stop){return}var r=d.$moveBox;var p=q.pageX,n=q.pageY,u,v,k,t,o,s,l,m;u=n-d.mouseParentY;v=p-d.mouseParentX;if(d.$moveParentBox.length){k=d.$moveParentBox.offset();t=d.$moveParentBox.outerWidth();o=d.$moveParentBox.outerHeight();s=r.outerWidth();l=r.outerHeight();u=u<k.top?k.top:u;v=v<k.left?k.left:v;u=u+l>k.top+o?k.top+o-l:u;v=v+s>k.left+t?k.left+t-s:v}u=u+(e.moveOffset.top||0);v=v+(e.moveOffset.left||0);r.css({top:u,left:v});typeof e.mousemoveCallback==="function"&&e.mousemoveCallback.call(d,{pageX:p,pageY:n})})};this.$moveBox=b(e.moveEle);this.$moveParentBox=b(e.parentEle);this.$movemask=undefined;this.isDown=false;this.mouseParentX=0;this.mouseParentY=0;this.stop=false;f()};exports.create=function(d){return new c(d)}});